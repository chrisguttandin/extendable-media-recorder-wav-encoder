// This is the minified and stringified code of the extendable-media-recorder-wav-encoder-worker package.
export const worker = `(()=>{var e={881:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e)throw new TypeError("expected a string");return e.trim().replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\\W/g,(e=>/[À-ž]/.test(e)?e:"-")).replace(/^-+|-+$/g,"").replace(/-{2,}/g,(e=>t&&t.condense?"-":e)).toLowerCase()}},507:e=>{var t=function(e){var t,r,n=/\\w+/.exec(e);if(!n)return"an";var s=(r=n[0]).toLowerCase(),o=["honest","hour","hono"];for(t in o)if(0==s.indexOf(o[t]))return"an";if(1==s.length)return"aedhilmnorsx".indexOf(s)>=0?"an":"a";if(r.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/))return"an";var a=[/^e[uw]/,/^onc?e\\b/,/^uni([^nmd]|mo)/,/^u[bcfhjkqrst][aeiou]/];for(t=0;t<a.length;t++)if(s.match(a[t]))return"a";return r.match(/^U[NK][AIEO]/)?"a":r==r.toUpperCase()?"aedhilmnorsx".indexOf(s[0])>=0?"an":"a":"aeiou".indexOf(s[0])>=0||s.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/)?"an":"a"};void 0!==e.exports?e.exports=t:window.indefiniteArticle=t}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(881),t=r.n(e),n=r(507),s=r.n(n);const o=(e,r)=>void 0===r?e:r.reduce(((e,r)=>{if("capitalize"===r){const t=e.charAt(0).toUpperCase(),r=e.slice(1);return"".concat(t).concat(r)}return"dashify"===r?t()(e):"prependIndefiniteArticle"===r?"".concat(s()(e)," ").concat(e):e}),e),a=(e,t)=>{const r=/\\\${([^.}]+)((\\.[^(]+\\(\\))*)}/g,n=[];let s=r.exec(e);for(;null!==s;){const t={modifiers:[],name:s[1]};if(void 0!==s[3]){const e=/\\.[^(]+\\(\\)/g;let r=e.exec(s[2]);for(;null!==r;)t.modifiers.push(r[0].slice(1,-2)),r=e.exec(s[2])}n.push(t),s=r.exec(e)}const a=n.reduce(((e,r)=>e.map((e=>"string"==typeof e?e.split((e=>{const t=e.name+e.modifiers.map((e=>"\\\\.".concat(e,"\\\\(\\\\)"))).join("");return new RegExp("\\\\$\\\\{".concat(t,"}"),"g")})(r)).reduce(((e,n,s)=>0===s?[n]:r.name in t?[...e,o(t[r.name],r.modifiers),n]:[...e,e=>o(e[r.name],r.modifiers),n]),[]):[e])).reduce(((e,t)=>[...e,...t]),[])),[e]);return e=>a.reduce(((t,r)=>"string"==typeof r?[...t,r]:[...t,r(e)]),[]).join("")},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=void 0===e.code?void 0:a(e.code,t),n=void 0===e.message?void 0:a(e.message,t);return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=void 0===s&&(t instanceof Error||void 0!==t.code&&"Exception"===t.code.slice(-9)),{cause:a,missingParameters:i}=o?{cause:t,missingParameters:{}}:{cause:s,missingParameters:t},c=void 0===n?new Error:new Error(n(i));return null!==a&&(c.cause=a),void 0!==r&&(c.code=r(i)),void 0!==e.status&&(c.status=e.status),c}},c=-32603,l=-32602,u=i({message:'The requested method called "\${method}" is not supported.',status:-32601}),d=i({message:'The handler of the method called "\${method}" returned no required result.',status:c}),h=i({message:'The handler of the method called "\${method}" returned an unexpected result.',status:c}),f=i({message:'The specified parameter called "portId" with the given value "\${portId}" does not identify a port connected to this worker.',status:l}),m=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,p=536870912,g=1073741824,v=new WeakMap;var w;const y=((e,t)=>r=>{const n=t.get(r);let s=void 0===n?r.size:n<g?n+1:0;if(!r.has(s))return e(r,s);if(r.size<p){for(;r.has(s);)s=Math.floor(Math.random()*g);return e(r,s)}if(r.size>m)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(s);)s=Math.floor(Math.random()*m);return e(r,s)})((w=v,(e,t)=>(w.set(e,t),t)),v),b=((e=>{})(y),new Map),E=(e,t,r)=>({...t,connect:r=>{let{port:n}=r;n.start();const s=e(n,t),o=y(b);return b.set(o,(()=>{s(),n.close(),b.delete(o)})),{result:o}},disconnect:e=>{let{portId:t}=e;const r=b.get(t);if(void 0===r)throw f({portId:t.toString()});return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=r();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),M=function(e,t){const r=E(M,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=((e,t)=>async r=>{let{data:{id:n,method:s,params:o}}=r;const a=t[s];try{if(void 0===a)throw u({method:s});const t=void 0===o?a():a(o);if(void 0===t)throw d({method:s});const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw h({method:s})}else{if(void 0===r.result)throw h({method:s});const{result:t,transferables:o=[]}=r;e.postMessage({id:n,result:t},o)}}catch(t){const{message:r,status:s=-32603}=t;e.postMessage({error:{code:s,message:r},id:n})}})(e,r);return e.addEventListener("message",n),()=>e.removeEventListener("message",n)},x=e=>e.reduce(((e,t)=>e+t.length),0),A=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let s=0;s<t;s+=1){const t=e[s];void 0===r[s]&&(r[s]=[]);const o=t.shift();if(void 0===o)break e;r[s].push(o),0===s&&(n+=o.length)}}if(n>t){const s=n-t;r.forEach(((t,r)=>{const n=t.pop(),o=n.length-s;t.push(n.subarray(0,o)),e[r].unshift(n.subarray(o))}))}return r},U=new Map,I=(e=>(t,r,n)=>{const s=e.get(t);if(void 0===s){const s={channelDataArrays:n.map((e=>[e])),isComplete:!0,sampleRate:r};return e.set(t,s),s}return s.channelDataArrays.forEach(((e,t)=>e.push(n[t]))),s})(U),C=((e,t)=>(r,n,s,o)=>{const a=s>>3,i="subsequent"===n?0:44,c=r.length,l=e(r[0]),u=new ArrayBuffer(l*c*a+i),d=new DataView(u);return"subsequent"!==n&&t(d,s,c,"complete"===n?l:Number.POSITIVE_INFINITY,o),r.forEach(((e,t)=>{let r=i+t*a;e.forEach((e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=c*a}}))})),[u]})(x,((e,t,r,n,s)=>{const o=t>>3,a=Math.min(n*r*o,4294967251);e.setUint32(0,1380533830),e.setUint32(4,a+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,s,!0),e.setUint32(28,s*r*o,!0),e.setUint16(32,r*o,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,a,!0)})),N=new Map;M(self,{characterize:()=>({result:/^audio\\/wav$/}),encode:e=>{let{recordingId:t,timeslice:r}=e;const n=N.get(t);void 0!==n&&(N.delete(t),n.reject(new Error("Another request was made to initiate an encoding.")));const s=U.get(t);if(null!==r){if(void 0===s||x(s.channelDataArrays[0])*(1e3/s.sampleRate)<r)return new Promise(((e,n)=>{N.set(t,{reject:n,resolve:e,timeslice:r})}));const e=A(s.channelDataArrays,Math.ceil(r*(s.sampleRate/1e3))),n=C(e,s.isComplete?"initial":"subsequent",16,s.sampleRate);return s.isComplete=!1,{result:n,transferables:n}}if(void 0!==s){const e=C(s.channelDataArrays,s.isComplete?"complete":"subsequent",16,s.sampleRate);return U.delete(t),{result:e,transferables:e}}return{result:[],transferables:[]}},record:e=>{let{recordingId:t,sampleRate:r,typedArrays:n}=e;const s=I(t,r,n),o=N.get(t);if(void 0!==o&&x(s.channelDataArrays[0])*(1e3/r)>=o.timeslice){const e=A(s.channelDataArrays,Math.ceil(o.timeslice*(r/1e3))),n=C(e,s.isComplete?"initial":"subsequent",16,r);s.isComplete=!1,N.delete(t),o.resolve({result:n,transferables:n})}return{result:null}}})})()})();`; // tslint:disable-line:max-line-length
